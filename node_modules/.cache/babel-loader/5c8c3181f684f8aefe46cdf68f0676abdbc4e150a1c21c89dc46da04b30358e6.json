{"ast":null,"code":"var _jsxFileName = \"/Users/sagisimchi/Documents/GitHub/dent2-client/src/components/website/analytics/ChartComputed.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport { Bar } from \"react-chartjs-2\";\nimport { Chart, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { isEqual } from \"lodash\";\nimport ArticlePreviewTooltip from \"../articles/articlePreviewTooltip\";\nimport styled from \"styled-components\";\nimport useNavigator from \"../../../hooks/useNavigator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TooltipStyled = styled.div`\n  transform: translate(-50%, 0);\n  transition: all 0.3s ease;\n  pointer-events: none;\n  position: absolute;\n`;\n_c = TooltipStyled;\nlet latestId = \"\";\nChart.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst ChartComponent = _ref => {\n  _s();\n  let {\n    data\n  } = _ref;\n  const navigate = useNavigator();\n  const chartRef = useRef(null); //create reference hook\n  const [tooltip, setTooltip] = useState({\n    opacity: 0,\n    top: 0,\n    left: 0,\n    date: \"\",\n    value: \"\"\n  }); //initial tooltip state\n\n  const options = {\n    indexAxis: \"x\",\n    // Elements options apply to all of the options unless overridden in a dataset\n    // In this case, we are setting the border of each horizontal bar to be 2px wide\n    maintainAspectRatio: true,\n    elements: {\n      bar: {\n        borderWidth: 3\n      }\n    },\n    responsive: true,\n    interaction: {\n      mode: \"index\",\n      intersect: false\n    },\n    onHover: e => {},\n    onClick: e => {\n      latestId && navigate(`/articles/${latestId}`);\n    },\n    plugins: {\n      legend: {\n        display: false\n      },\n      title: {\n        display: false,\n        text: \"Unique Views\"\n      },\n      tooltip: {\n        enabled: false,\n        external: context => {\n          const tooltipModel = context.tooltip;\n          if (!chartRef || !chartRef.current) return;\n          const position = context.chart.canvas.getBoundingClientRect();\n          context.chart.canvas.style.cursor = \"pointer\";\n          if (!tooltipModel.opacity && tooltip.opacity) {\n            setTooltip(prev => ({\n              ...prev,\n              opacity: 0\n            }));\n            return;\n          }\n          const id = tooltipModel.chart.data.datasets[0].data[tooltipModel.dataPoints[0].dataIndex].id;\n          latestId = id;\n          const newTooltipData = {\n            opacity: 1,\n            left: position.left + tooltipModel.caretX + 30,\n            top: position.top + tooltipModel.caretY,\n            date: tooltipModel.dataPoints[0].label,\n            value: id\n          };\n          if (!isEqual(tooltip, newTooltipData)) setTooltip(newTooltipData);\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [data && /*#__PURE__*/_jsxDEV(Bar, {\n      ref: chartRef,\n      options: options,\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(TooltipStyled, {\n      className: \"tooltip\",\n      style: {\n        top: tooltip.top,\n        left: tooltip.left,\n        opacity: tooltip.opacity\n      },\n      children: /*#__PURE__*/_jsxDEV(TooltipComponent, {\n        id: tooltip.value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n_s(ChartComponent, \"/gFio/CAXBkwTP5MPbKCsDZDxTo=\", false, function () {\n  return [useNavigator];\n});\n_c2 = ChartComponent;\nconst TooltipComponent = _ref2 => {\n  let {\n    id\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: id && /*#__PURE__*/_jsxDEV(ArticlePreviewTooltip, {\n      id: id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }, this)\n  }, void 0, false);\n};\n_c3 = TooltipComponent;\nexport default ChartComponent;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"TooltipStyled\");\n$RefreshReg$(_c2, \"ChartComponent\");\n$RefreshReg$(_c3, \"TooltipComponent\");","map":{"version":3,"names":["React","useRef","useState","Bar","Chart","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","isEqual","ArticlePreviewTooltip","styled","useNavigator","jsxDEV","_jsxDEV","Fragment","_Fragment","TooltipStyled","div","_c","latestId","register","ChartComponent","_ref","_s","data","navigate","chartRef","tooltip","setTooltip","opacity","top","left","date","value","options","indexAxis","maintainAspectRatio","elements","bar","borderWidth","responsive","interaction","mode","intersect","onHover","e","onClick","plugins","legend","display","title","text","enabled","external","context","tooltipModel","current","position","chart","canvas","getBoundingClientRect","style","cursor","prev","id","datasets","dataPoints","dataIndex","newTooltipData","caretX","caretY","label","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","className","TooltipComponent","_c2","_ref2","_c3","$RefreshReg$"],"sources":["/Users/sagisimchi/Documents/GitHub/dent2-client/src/components/website/analytics/ChartComputed.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { Bar } from \"react-chartjs-2\";\nimport {\n  Chart,\n  ChartOptions,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartData,\n} from \"chart.js\";\nimport { isEqual } from \"lodash\";\nimport ArticleCard from \"../articles/ArticleCard\";\nimport { useRecoilValue } from \"recoil\";\nimport { articleState, articleSummaryState } from \"../../../state/articleState\";\nimport { ArticlesSummarySelector } from \"../../../state/articlesState\";\nimport { useNavigate, useParams } from \"react-router\";\nimport ArticlePreviewTooltip from \"../articles/articlePreviewTooltip\";\nimport styled from \"styled-components\";\nimport useNavigator from \"../../../hooks/useNavigator\";\n\nconst TooltipStyled = styled.div`\n  transform: translate(-50%, 0);\n  transition: all 0.3s ease;\n  pointer-events: none;\n  position: absolute;\n`;\n\nlet latestId: string = \"\";\n\nChart.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst ChartComponent: React.FC<{ data: ChartData<\"bar\"> | null }> = ({\n  data,\n}) => {\n  const navigate = useNavigator();\n  const chartRef = useRef(null); //create reference hook\n  const [tooltip, setTooltip] = useState({\n    opacity: 0,\n    top: 0,\n    left: 0,\n    date: \"\",\n    value: \"\",\n  }); //initial tooltip state\n\n  const options: ChartOptions<\"bar\"> = {\n    indexAxis: \"x\",\n    // Elements options apply to all of the options unless overridden in a dataset\n    // In this case, we are setting the border of each horizontal bar to be 2px wide\n    maintainAspectRatio: true,\n    elements: {\n      bar: {\n        borderWidth: 3,\n      },\n    },\n    responsive: true,\n\n    interaction: {\n      mode: \"index\",\n      intersect: false,\n    },\n\n    onHover: (e: any) => {},\n\n    onClick: (e: any) => {\n      latestId && navigate(`/articles/${latestId}`);\n    },\n\n    plugins: {\n      legend: {\n        display: false,\n      },\n      title: {\n        display: false,\n        text: \"Unique Views\",\n      },\n\n      tooltip: {\n        enabled: false,\n        external: (context) => {\n          const tooltipModel = context.tooltip as any;\n          if (!chartRef || !chartRef.current) return;\n          const position = context.chart.canvas.getBoundingClientRect();\n          context.chart.canvas.style.cursor = \"pointer\";\n\n          if (!tooltipModel.opacity && tooltip.opacity) {\n            setTooltip((prev) => ({ ...prev, opacity: 0 }));\n            return;\n          }\n\n          const id =\n            tooltipModel.chart.data.datasets[0].data[\n              tooltipModel.dataPoints[0].dataIndex\n            ].id;\n\n          latestId = id;\n\n          const newTooltipData = {\n            opacity: 1,\n            left: position.left + tooltipModel.caretX + 30,\n            top: position.top + tooltipModel.caretY,\n            date: tooltipModel.dataPoints[0].label,\n            value: id,\n          };\n          if (!isEqual(tooltip, newTooltipData)) setTooltip(newTooltipData);\n        },\n      },\n    },\n  };\n\n  return (\n    <div>\n      {data && <Bar ref={chartRef} options={options} data={data} />}\n\n      <TooltipStyled\n        className=\"tooltip\"\n        style={{\n          top: tooltip.top,\n          left: tooltip.left,\n          opacity: tooltip.opacity,\n        }}\n      >\n        <TooltipComponent id={tooltip.value} />\n      </TooltipStyled>\n    </div>\n  );\n};\n\nconst TooltipComponent: React.FC<{ id: string }> = ({ id }) => {\n  return <>{id && <ArticlePreviewTooltip id={id} />}</>;\n};\n\nexport default ChartComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}