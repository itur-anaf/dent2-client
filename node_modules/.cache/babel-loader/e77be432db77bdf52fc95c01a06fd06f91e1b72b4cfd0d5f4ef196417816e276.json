{"ast":null,"code":"var _jsxFileName = \"/Users/sagisimchi/Documents/GitHub/dent2-client/src/components/document/FormWrapper.tsx\",\n  _s = $RefreshSig$();\nimport styled from \"styled-components\";\nimport { FormProvider, useFormContext } from \"react-hook-form\";\nimport { useParams } from \"react-router\";\nimport { useMemo, useState } from \"react\";\nimport Button from \"../common/form/Button\";\nimport { useRecoilState } from \"recoil\";\nimport { documentState } from \"../../state/documentState\";\nimport documentService from \"../../core/services/document.service\";\nimport DescriptionInput from \"./components/DescriptionInput\";\nimport documentsDictionary from \"./documentsDictionary\";\nimport AttachmentInput from \"../common/form/AttachmentInput\";\nimport AudienceSelect from \"../common/form/AudienceSelect\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TextHeader = styled.div`\n  color: #000;\n  font-family: \"Assistant\";\n  font-size: 18.298px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 110%; /* 20.128px */\n  letter-spacing: -0.549px;\n  margin-top: 20px;\n  margin-bottom: 17px;\n`;\n_c = TextHeader;\nconst Wrapper = styled.div`\n  height: 100%;\n  padding: 30px;\n  flex: 1;\n  border: 1px solid #e6e6e6;\n  width: 100%;\n`;\n_c2 = Wrapper;\nconst StyledButton = styled(Button)`\n  margin-top: 40px;\n  background: var(--main-hebrew, #6300c1);\n  width: 170px;\n  justify-content: center;\n`;\n_c3 = StyledButton;\nconst FormWrapper = () => {\n  _s();\n  const {\n    documentId\n  } = useParams();\n  const [document, setDocument] = useRecoilState(documentState(documentId));\n  const [isLoading, setIsLoaded] = useState(false);\n  const FormComponent = useMemo(() => documentsDictionary[document.type].form, [document.type]);\n  const methods = useFormContext();\n  const [, setDoc] = useRecoilState(documentState(documentId));\n  const onGenerate = async () => {\n    setIsLoaded(true);\n    const params = methods.getValues().inputParams;\n    try {\n      const doc = await documentService.generateDocument(documentId, params);\n      setDoc(doc);\n      methods.setValue(\"output\", doc.output);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setIsLoaded(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    className: \"col-4\",\n    children: /*#__PURE__*/_jsxDEV(FormProvider, {\n      ...methods,\n      children: [/*#__PURE__*/_jsxDEV(DescriptionInput, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormComponent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(TextHeader, {\n        children: \"\\u05EA\\u05DE\\u05D5\\u05E0\\u05EA \\u05D4\\u05E4\\u05D5\\u05E1\\u05D8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AttachmentInput, {\n        name: \"inputParams.imageUrl\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextHeader, {\n        children: \"\\u05E7\\u05D4\\u05DC \\u05D9\\u05E2\\u05D3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AudienceSelect, {\n        fieldName: \"test\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledButton, {\n        loading: isLoading,\n        onClick: methods.handleSubmit(onGenerate),\n        primary: true,\n        children: \"\\u05D9\\u05E6\\u05D9\\u05E8\\u05EA \\u05EA\\u05D5\\u05DB\\u05DF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(FormWrapper, \"41b6NeND6fbzO6igl2wZEZAUmSM=\", false, function () {\n  return [useParams, useRecoilState, useFormContext, useRecoilState];\n});\n_c4 = FormWrapper;\nexport default FormWrapper;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"TextHeader\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"StyledButton\");\n$RefreshReg$(_c4, \"FormWrapper\");","map":{"version":3,"names":["styled","FormProvider","useFormContext","useParams","useMemo","useState","Button","useRecoilState","documentState","documentService","DescriptionInput","documentsDictionary","AttachmentInput","AudienceSelect","jsxDEV","_jsxDEV","TextHeader","div","_c","Wrapper","_c2","StyledButton","_c3","FormWrapper","_s","documentId","document","setDocument","isLoading","setIsLoaded","FormComponent","type","form","methods","setDoc","onGenerate","params","getValues","inputParams","doc","generateDocument","setValue","output","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","fieldName","loading","onClick","handleSubmit","primary","_c4","$RefreshReg$"],"sources":["/Users/sagisimchi/Documents/GitHub/dent2-client/src/components/document/FormWrapper.tsx"],"sourcesContent":["import styled from \"styled-components\";\nimport { Controller, FormProvider, useFormContext } from \"react-hook-form\";\nimport { useParams } from \"react-router\";\nimport { DocumentEntity, DocumentEntityType } from \"neword-core\";\nimport { useMemo, useState } from \"react\";\nimport Button from \"../common/form/Button\";\nimport { useRecoilState } from \"recoil\";\nimport { documentState } from \"../../state/documentState\";\nimport documentService from \"../../core/services/document.service\";\nimport DescriptionInput from \"./components/DescriptionInput\";\nimport { InputText } from \"primereact/inputtext\";\nimport documentsDictionary from \"./documentsDictionary\";\nimport AttachmentInput from \"../common/form/AttachmentInput\";\nimport AudienceSelect from \"../common/form/AudienceSelect\";\n\nconst TextHeader = styled.div`\n  color: #000;\n  font-family: \"Assistant\";\n  font-size: 18.298px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 110%; /* 20.128px */\n  letter-spacing: -0.549px;\n  margin-top: 20px;\n  margin-bottom: 17px;\n`;\n\nconst Wrapper = styled.div`\n  height: 100%;\n  padding: 30px;\n  flex: 1;\n  border: 1px solid #e6e6e6;\n  width: 100%;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: 40px;\n  background: var(--main-hebrew, #6300c1);\n  width: 170px;\n  justify-content: center;\n`;\n\nconst FormWrapper: React.FC = () => {\n  const { documentId } = useParams<{\n    documentId: string;\n  }>();\n  const [document, setDocument] = useRecoilState(\n    documentState(documentId as string)\n  );\n  const [isLoading, setIsLoaded] = useState(false);\n\n  const FormComponent = useMemo(\n    () => documentsDictionary[document.type].form,\n    [document.type]\n  );\n\n  const methods = useFormContext<DocumentEntity<typeof document.type>>();\n  const [, setDoc] = useRecoilState(documentState(documentId as string));\n\n  const onGenerate = async () => {\n    setIsLoaded(true);\n    const params = methods.getValues().inputParams;\n\n    try {\n      const doc = await documentService.generateDocument(\n        documentId as string,\n        params\n      );\n      setDoc(doc);\n      methods.setValue(\"output\", doc.output);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setIsLoaded(false);\n    }\n  };\n\n  return (\n    <Wrapper className=\"col-4\">\n      <FormProvider {...methods}>\n        <DescriptionInput />\n        {<FormComponent />}\n        <TextHeader>תמונת הפוסט</TextHeader>\n        <AttachmentInput<\n          DocumentEntity<DocumentEntityType.INSTAGRAM_CAPTION>\n        > name=\"inputParams.imageUrl\" />\n\n        <TextHeader>קהל יעד</TextHeader>\n\n        <AudienceSelect fieldName=\"test\" />\n\n        <StyledButton\n          loading={isLoading}\n          onClick={methods.handleSubmit(onGenerate)}\n          primary\n        >\n          יצירת תוכן\n        </StyledButton>\n      </FormProvider>\n    </Wrapper>\n  );\n};\n\nexport default FormWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}